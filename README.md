# 2_6_ERD
## Схема DWH хранилища
### Задание
Ваш начальник хочет, чтобы DWH объединяло данные всех отделов организации. Однако вы предпочитаете пошаговый подход, поэтому вашей первоочередной задачей является создание связи между данными отдела продаж и данными отдела маркетинга.
У вас есть следующие входные данные:
- Информация о продажах (id заказа, время продажи, название товара, цена, бренд, модель товара, категория, cookies покупателя, сумма)
- Информация о личных кабинетах покупателей (id личного кабинета, cookies покупателя, ФИО, пол, дата рождения, email, телефон)
- Информация о промо-акциях (id промо-акции, id товара, дата начала промо, дата окончания промо, размер скидки)
  
Вся эта история нужна для того, чтобы аналитики могли лучшим образом формировать целевую аудиторию для будущих рекламных акций. Таким образом на выходе у вас должна получится витрина, которая будет содержать следующую информацию:
- id личного кабинета  
- Пол
- Категория возраста
- Электронная почта
- Телефон
- Товар, который чаще всего покупал клиент за последний месяц
- Бренд и категория товаров, которые чаще всего покупал клиент
- Сумма, потраченная клиентом за месяц
- Количество товаров, купленных со скидкой
Ваша основная задача — спроектировать DWH с использованием слоев raw, core и mart. В качестве решения предложите ER-диаграмму вашего будущего DWH.

### Слой RAW
Сырые данные собираются в три набора данных:  
__1. orders__ - уникальный ключ заказа, параметры товара, ссылка на покупателя посредством cookies  
__2. private_cabinets__ - по сути данные покупателя  
__3. promo__ - данные по промоакциям  

### Слой CORE
Все данные распределяем по трем сущностям:
- __products__ - товары
- __clients__ - личный кабинет по сути содерщит данные по сущности покупатель
- __orders__ - заказ

### Слой MART
Обрабатываем данные на слое CORE и консолидируем запросом указанные в задании данные в витрине datamart
- __sex__ - пол 
- __age_category__ - категория, например верхняя возрастная граница
- __email__ - почта
- __phone__ - телефон
- __favorite_product__ - любимый продукт
- __favorite_category__ - любимая категория
- __favorite_brand__ - любимый бренд
- __promo_product_qty__ - количество товаров о промоакциям

![image](https://github.com/Oleg-2023/2_6_ERD/assets/144448179/ce0e1f03-46b5-4124-8170-3ac6c75ee20c)

